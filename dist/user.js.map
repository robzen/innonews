{"version":3,"sources":["../user.js"],"names":[],"mappings":";;AAAA,SAAS,IAAT,CAAc,EAAd,EAAkB,SAAlB,EAA6B;AACzB,QAAI,aAAa,CAAjB;AACA,QAAI,WAAW;AACX,oBAAY,aADD;AAEX,uBAAe;AAFJ,KAAf;AAIA,QAAI,cAAc;AACd,qBAAa,CADC;AAEd,eAAO;AAFO,KAAlB;;AAKA,QAAM,qBAAsB,qBAAa;AACrC,YAAI,0BAA0B,qBAA9B;AACA,YAAI,WAAW,wBAAwB,IAAxB,CAA6B,SAA7B,CAAf;;AAEA,YAAG,YAAY,SAAS,MAAT,IAAmB,CAAlC,EAAqC;AACjC,mBAAO,SAAS,CAAT,CAAP;AACH,SAFD,MAEO;AACH,mBAAO,SAAP;AACH;AACJ,KAT0B,CASxB,SATwB,CAA3B;;AAWA,QAAM,kBAAmB,8BAAsB;AAC3C,gBAAO,kBAAP;AACI,iBAAK,OAAL;AACA,iBAAK,OAAL;AACA,iBAAK,OAAL;AACI,uBAAO,EAAE,OAAO,GAAT,EAAc,QAAQ,GAAtB,EAA2B,eAAe,EAA1C,EAAP;AACJ,iBAAK,OAAL;AACI,uBAAO,EAAE,OAAO,GAAT,EAAc,QAAQ,GAAtB,EAA2B,eAAe,EAA1C,EAAP;AANR;;AASA,eAAO,EAAE,OAAO,GAAT,EAAc,QAAQ,GAAtB,EAA2B,eAAe,CAA1C,EAAP;AACH,KAXuB,CAWrB,kBAXqB,CAAxB;;AAaA,SAAK,KAAL,GAAa,YAAM;AAAE,eAAO,EAAP;AAAY,KAAjC;AACA,SAAK,qBAAL,GAA6B,YAAM;AAAE,eAAO,kBAAP;AAA4B,KAAjE;AACA,SAAK,kBAAL,GAA0B,YAAM;AAAE,eAAO,eAAP;AAAyB,KAA3D;AACA,SAAK,aAAL,GAAqB,YAAM;AAAE,eAAO,UAAP;AAAoB,KAAjD;AACA,SAAK,aAAL,GAAqB,qBAAa;AAAE,qBAAa,SAAb;AAAwB,KAA5D;AACA,SAAK,WAAL,GAAmB,YAAM;AAAE,eAAO,QAAP;AAAkB,KAA7C;;AAEA,SAAK,WAAL,GAAmB,aAAK;AACpB,YAAG,EAAE,UAAL,EAAiB,SAAS,UAAT,GAAsB,EAAE,UAAxB;AACjB,YAAG,EAAE,aAAL,EAAoB,SAAS,aAAT,GAAyB,EAAE,aAA3B;AACvB,KAHD;;AAKA,SAAK,WAAL,GAAmB,YAAM;AACrB,oBAAY,KAAZ,GAAoB,EAApB;AACA,oBAAY,WAAZ,GAA0B,CAA1B;AACH,KAHD;;AAKA,SAAK,QAAL,GAAgB,qBAAa;AACzB,oBAAY,KAAZ,CAAkB,IAAlB,CAAuB,SAAvB;AACH,KAFD;;AAIA,SAAK,YAAL,GAAoB,YAAM;AACtB,YAAI,YAAY,WAAhB,CADsB,CACO;;AAE7B,YAAG,YAAY,KAAZ,CAAkB,MAAlB,GAA2B,CAA9B,EAAiC;AAC7B,wBAAY,YAAY,KAAZ,CAAkB,YAAY,WAA9B,CAAZ;AACA,wBAAY,WAAZ,GAA0B,EAAE,YAAY,WAAd,GAA4B,YAAY,KAAZ,CAAkB,MAAxE;AACH;;AAED,eAAO,SAAP;AACH,KATD;AAUH;;AAED,OAAO,OAAP,GAAiB,IAAjB","file":"user.js","sourcesContent":["function User(ip, userAgent) {\r\n    let lastUpdate = 0;\r\n    let settings = {\r\n        newsSource: 'google-news',\r\n        updateMinutes: 10\r\n    };\r\n    let imageFolder = {\r\n        activeIndex: 0,\r\n        files: []\r\n    };\r\n\r\n    const innovaphoneVersion = (userAgent => {\r\n        let innovaphoneVersionRegex = /^innovaphone-(.+)\\//;\r\n        let regexArr = innovaphoneVersionRegex.exec(userAgent);\r\n\r\n        if(regexArr && regexArr.length >= 2) {\r\n            return regexArr[1];\r\n        } else {\r\n            return 'unknown';\r\n        }\r\n    })(userAgent);\r\n\r\n    const displaySettings = (innovaphoneVersion => {\r\n        switch(innovaphoneVersion) {\r\n            case 'IP111':\r\n            case 'IP222':\r\n            case 'IP241':\r\n                return { width: 320, height: 240, paddingBottom: 40 };\r\n            case 'IP232':\r\n                return { width: 480, height: 272, paddingBottom: 40 };\r\n        }\r\n\r\n        return { width: 400, height: 300, paddingBottom: 0 };\r\n    })(innovaphoneVersion);\r\n\r\n    this.getIp = () => { return ip; };\r\n    this.getInnovaphoneVersion = () => { return innovaphoneVersion; };\r\n    this.getDisplaySettings = () => { return displaySettings; };\r\n    this.getLastUpdate = () => { return lastUpdate; };\r\n    this.setLastUpdate = timestamp => { lastUpdate = timestamp };\r\n    this.getSettings = () => { return settings; };\r\n\r\n    this.setSettings = s => {\r\n        if(s.newsSource) settings.newsSource = s.newsSource;\r\n        if(s.updateMinutes) settings.updateMinutes = s.updateMinutes;\r\n    };\r\n\r\n    this.resetImages = () => {\r\n        imageFolder.files = [];\r\n        imageFolder.activeIndex = 0;\r\n    };\r\n\r\n    this.addImage = imageFile => {\r\n        imageFolder.files.push(imageFile);\r\n    };\r\n\r\n    this.getNextImage = () => {\r\n        let nextImage = 'error.png'; //TODO: passendes error bild fÃ¼r innovaphone display\r\n\r\n        if(imageFolder.files.length > 0) {\r\n            nextImage = imageFolder.files[imageFolder.activeIndex];\r\n            imageFolder.activeIndex = ++imageFolder.activeIndex % imageFolder.files.length;\r\n        }\r\n\r\n        return nextImage;\r\n    };\r\n}\r\n\r\nmodule.exports = User;"]}